apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: ansible-semaphore
  namespace: ansible
spec:
  interval: 5m
  chart:
    spec:
      chart: ansible-semaphore
      version: "7.1.4"
      sourceRef:
        kind: HelmRepository
        name: cloudhippie-ansible-semaphore
        namespace: ansible
  values:
    database:
      type: postgres
      host: postgres-service.home-samba.svc.cluster.local
      port: 5432
      usernameFromSecret: true
      passwordKey: password
      existingSecret: ansible-secret