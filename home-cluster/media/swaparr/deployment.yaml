apiVersion: apps/v1
kind: Deployment
metadata:
  name: swaparr
  namespace: home-media
  labels:
    app: swaparr
spec:
  replicas: 0
  selector:
    matchLabels:
      app: swaparr
  template:
    metadata:
      labels:
        app: swaparr
    spec:
      containers:
      - name: radarr
        image: ghcr.io/thijmengthn/swaparr:0.5.0
        resources: {}
        env:
        - name: BASEURL
          value: "http://sonarr-service.home-media.svc.cluster.local:8989"
        - name: APIKEY
          valueFrom:
            secretKeyRef:
              name: swaparr-secret
              key: radarr-api-key
        - name: PLATFORM
          value: "sonarr"
        - name: TIME_THRESHOLD
          value: "72h"
        - name: SIZE_THRESHOLD
          value: "25GB"
        - name: CHECK_INTERVAL
          value: "12h"
        - name: STRIKE_THRESHOLD
          value: "3"
        - name: AGGRESSIVE_STRIKES
          value: "true"